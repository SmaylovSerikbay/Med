# 🗺️ Схема генерируемых тестовых данных

## Структура данных

```
┌─────────────────────────────────────────────────────────────┐
│                    PROFMED.KZ TEST DATA                     │
│                  (минимум 20 записей каждой)                │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 1. БАЗОВЫЕ ДАННЫЕ                                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📋 Планы подписок (3)                                      │
│  ├── Базовый (50 сотрудников, 50,000 тг/мес)               │
│  ├── Бизнес (200 сотрудников, 150,000 тг/мес)              │
│  └── Корпоративный (безлимит, 500,000 тг/мес)              │
│                                                             │
│  👥 Пользователи (30+)                                      │
│  ├── 77021000001 - 77021000010 (владельцы работодателей)   │
│  ├── 77021000011 - 77021000015 (владельцы клиник)          │
│  ├── 77021000016 - 77021000030 (сотрудники)                │
│  └── 77013000000 - 77013000024 (врачи)                     │
│                                                             │
│  ⚠️  Вредные факторы (20)                                   │
│  ├── HF001 - Шум                                           │
│  ├── HF002 - Вибрация локальная                            │
│  ├── HF003 - Вибрация общая                                │
│  ├── HF004 - Пыль фиброгенная                              │
│  ├── HF005 - Химические вещества                           │
│  ├── HF006 - Биологические факторы                         │
│  ├── HF007 - Физические перегрузки                         │
│  ├── HF008 - Работа на высоте                              │
│  ├── HF009 - Электромагнитные поля                         │
│  ├── HF010 - Ионизирующее излучение                        │
│  ├── HF011 - Ультразвук                                    │
│  ├── HF012 - Инфразвук                                     │
│  ├── HF013 - Лазерное излучение                            │
│  ├── HF014 - Микроклимат нагревающий                       │
│  ├── HF015 - Микроклимат охлаждающий                       │
│  ├── HF016 - Освещенность недостаточная                    │
│  ├── HF017 - Работа с ПЭВМ                                 │
│  ├── HF018 - Нервно-эмоциональные нагрузки                 │
│  ├── HF019 - Работа в ночную смену                         │
│  └── HF020 - Монотонность труда                            │
│                                                             │
│  💼 Профессии (20)                                          │
│  ├── Электросварщик → HF001, HF004, HF008                  │
│  ├── Токарь → HF001, HF002, HF004                          │
│  ├── Слесарь → HF001, HF002, HF007                         │
│  ├── Маляр → HF005, HF008                                  │
│  ├── Водитель → HF001, HF003, HF019                        │
│  ├── Оператор ПЭВМ → HF017, HF018                          │
│  ├── Медсестра (декрет) → HF006, HF018                     │
│  ├── Повар (декрет) → HF014, HF007                         │
│  ├── Грузчик → HF007, HF015                                │
│  ├── Уборщик → HF005, HF007                                │
│  ├── Шахтер → HF001, HF004, HF007, HF015                   │
│  ├── Крановщик → HF001, HF008, HF018                       │
│  ├── Лаборант → HF005, HF006, HF017                        │
│  ├── Рентгенолог → HF010, HF017                            │
│  ├── Диспетчер → HF017, HF018, HF019                       │
│  ├── Охранник → HF018, HF019                               │
│  ├── Строитель → HF001, HF004, HF007, HF008                │
│  ├── Электрик → HF008, HF009                               │
│  ├── Механик → HF001, HF002, HF005                         │
│  └── Оператор ЧПУ → HF001, HF002, HF017                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 2. ОРГАНИЗАЦИИ                                              │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🏢 Работодатели (10)                                       │
│  ├── ТОО "Казахстанский завод"                             │
│  ├── АО "Промышленность Казахстана"                        │
│  ├── ТОО "Строительная компания Астана"                    │
│  ├── АО "Металлургический комбинат"                        │
│  ├── ТОО "Нефтегазовая компания"                           │
│  ├── АО "Энергетика Казахстана"                            │
│  ├── ТОО "Транспортная логистика"                          │
│  ├── АО "Горнодобывающая компания"                         │
│  ├── ТОО "Пищевая промышленность"                          │
│  └── АО "Химический завод"                                 │
│                                                             │
│  🏥 Клиники (5)                                             │
│  ├── Поликлиника №1                                        │
│  ├── Медицинский центр "Здоровье"                          │
│  ├── Клиника "Профмед"                                     │
│  ├── Центр профпатологии                                   │
│  └── Многопрофильная клиника "Медикер"                     │
│                                                             │
│  📜 Подписки (15)                                           │
│  └── Все организации → План "Бизнес" → Статус "active"     │
│                                                             │
│  🤝 Партнерства (15)                                        │
│  └── Каждая клиника ↔ 3 работодателя                       │
│                                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 3. ПЕРСОНАЛ                                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  👷 Сотрудники (50)                                         │
│  ├── Распределены по 10 работодателям                      │
│  ├── Привязаны к профессиям                                │
│  ├── Имеют User аккаунты                                   │
│  └── Активны (is_active=True)                              │
│                                                             │
│  👨‍⚕️ Врачи (25)                                             │
│  ├── Распределены по 5 клиникам                            │
│  ├── Специализации:                                        │
│  │   ├── Терапевт                                          │
│  │   ├── Невролог                                          │
│  │   ├── Офтальмолог                                       │
│  │   ├── Отоларинголог                                     │
│  │   ├── Хирург                                            │
│  │   ├── Кардиолог                                         │
│  │   ├── Пульмонолог                                       │
│  │   ├── Дерматолог                                        │
│  │   ├── Профпатолог                                       │
│  │   └── Психиатр                                          │
│  ├── Имеют User аккаунты                                   │
│  ├── Номера лицензий (LIC100000+)                          │
│  └── Активны (is_active=True)                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 4. МЕДИЦИНСКИЕ ДАННЫЕ                                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🔬 Осмотры (100)                                           │
│  ├── Типы:                                                 │
│  │   ├── Предварительные                                   │
│  │   ├── Периодические                                     │
│  │   └── Внеочередные                                      │
│  ├── Статусы:                                              │
│  │   ├── Запланирован (scheduled)                          │
│  │   ├── В процессе (in_progress)                          │
│  │   ├── Завершен (completed)                              │
│  │   └── Отменен (cancelled)                               │
│  ├── Привязаны к сотрудникам                               │
│  ├── Привязаны к клиникам                                  │
│  └── Имеют QR-коды                                         │
│                                                             │
│  📋 Результаты врачей (40+)                                 │
│  ├── Только для завершенных осмотров                       │
│  ├── Привязаны к вредным факторам                          │
│  ├── Результаты:                                           │
│  │   ├── Годен (fit)                                       │
│  │   ├── Не годен (unfit)                                  │
│  │   └── Годен с ограничениями (limited)                   │
│  └── Заключения и рекомендации                             │
│                                                             │
│  🧪 Лабораторные результаты (60+)                           │
│  ├── Только для завершенных осмотров                       │
│  ├── Анализы:                                              │
│  │   ├── Общий анализ крови                                │
│  │   ├── Общий анализ мочи                                 │
│  │   └── Глюкоза крови                                     │
│  └── Референсные значения                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ 5. ДОКУМЕНТЫ                                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  📄 Документы (15)                                          │
│  ├── Типы:                                                 │
│  │   ├── Приложение 3 (Список лиц)                         │
│  │   ├── Календарный план                                  │
│  │   └── Заключительный акт                                │
│  ├── Статус: Черновик (draft)                              │
│  ├── Год: 2025                                             │
│  └── Привязаны к работодателям                             │
│                                                             │
│  📅 Календарные планы (5)                                   │
│  ├── Год: 2025                                             │
│  ├── Привязаны к работодателям                             │
│  ├── Привязаны к клиникам                                  │
│  └── Данные плана (JSON)                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ ИТОГОВАЯ СТАТИСТИКА                                         │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  • Пользователи: 55+                                       │
│  • Планы подписок: 3                                       │
│  • Подписки: 15                                            │
│  • Работодатели: 10                                        │
│  • Клиники: 5                                              │
│  • Сотрудники: 50                                          │
│  • Врачи: 25                                               │
│  • Вредные факторы: 20                                     │
│  • Профессии: 20                                           │
│  • Партнерства: 15                                         │
│  • Осмотры: 100                                            │
│  • Результаты врачей: 40+                                  │
│  • Лабораторные результаты: 60+                            │
│  • Документы: 15                                           │
│  • Календарные планы: 5                                    │
│                                                             │
│  ✅ ВСЕ СУЩНОСТИ ИМЕЮТ МИНИМУМ 20 ЗАПИСЕЙ!                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ СВЯЗИ ДАННЫХ                                                │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Пользователь                                              │
│      ↓                                                      │
│  Организация (Работодатель/Клиника)                        │
│      ↓                                                      │
│  Подписка (План → Статус)                                  │
│      ↓                                                      │
│  Сотрудники / Врачи                                        │
│      ↓                                                      │
│  Профессия → Вредные факторы                               │
│      ↓                                                      │
│  Осмотр (QR-код)                                           │
│      ↓                                                      │
│  Результаты врачей + Лабораторные результаты               │
│      ↓                                                      │
│  Документы (Приложение 3, Календарный план, Акт)           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## Команда запуска

```bash
cd backend
python manage.py generate_test_data
```

## Время выполнения

⏱️ Примерно 1-2 минуты

## Безопасность

✅ Использует `get_or_create()` - безопасно для повторного запуска
✅ Не удаляет существующие данные
✅ Создает только отсутствующие записи

## Результат

После выполнения команды система полностью готова к тестированию и демонстрации! 🎉
